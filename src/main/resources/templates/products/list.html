<!--<!DOCTYPE html>-->
<!--<html lang="uk"-->
<!--      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
<!--      xmlns:th="http://www.thymeleaf.org"-->
<!--      layout:decorate="~{layout}">-->
<!--<head>-->
<!--    <title>Список товарів</title>-->
<!--</head>-->
<!--<body>-->
<!--<div layout:fragment="content" class="flex flex-col items-center">-->
<!--    <h1 class="text-3xl font-bold mb-6 text-green-700">Список товарів</h1>-->

<!--    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">-->
<!--        <div th:each="product : ${products}"-->
<!--             th:replace="components/product-card :: productCard(product = ${product})"></div>-->
<!--    </div>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="uk"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout}">
<head>
    <meta charset="utf-8"/>
    <title>Список товарів</title>
</head>
<body>
<div layout:fragment="content" class="flex flex-col items-center">
    <h1 class="text-3xl font-bold mb-6 text-green-700">Список товарів</h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <div th:each="product : ${products}">
            <div th:if="${product != null}"
                 class="bg-white h-80 rounded-3xl shadow-md hover:shadow-xl transition-all transform hover:-translate-y-1 hover:scale-105 w-72 flex flex-col overflow-hidden">

                <!-- Зображення -->
                <div class="w-full aspect-[4/3] bg-green-50 flex items-center justify-center overflow-hidden">
                    <div th:if="${product.image != null}">
                        <img th:src="@{'/' + ${uploadDir} + '/medium/' + ${product.image}}"
                             th:alt="${product.name} + ' image'"
                             class="w-full h-full object-cover"/>
                    </div>
                    <div th:if="${product.image == null}" class="text-gray-400 text-sm text-center">
                        Немає фото
                    </div>
                </div>

                <!-- Інформація про товар -->
                <div class="p-4 flex flex-col flex-1 justify-between">
                    <div class="flex flex-col items-center flex-1">
                        <h2 class="text-lg font-semibold text-gray-800 text-center mb-1 truncate"
                            th:text="${product.name} ?: 'Без назви'">Назва товару</h2>

                        <span th:text="${product.categoryName} != null ? ${product.categoryName} : '—'"
                              class="text-xs font-medium text-green-700 bg-green-100 px-3 py-1 rounded-full mb-2">
                    Категорія
                </span>

                        <p class="text-gray-500 text-sm text-center mb-4 line-clamp-3 overflow-hidden"
                           th:text="${product.description} ?: 'Опис відсутній'">
                            Опис товару
                        </p>
                    </div>

                    <!-- Кнопки -->
                    <div class="flex gap-2 mt-2">
                        <a th:href="@{/products/{slug}(slug=${product.slug})}"
                           class="flex-1 text-center py-2 rounded-lg bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold hover:from-green-600 hover:to-green-700 transition">
                            Деталі
                        </a>

                        <button type="button"
                                class="flex-1 flex items-center justify-center gap-2 py-2 rounded-lg bg-gradient-to-r from-yellow-400 to-yellow-500 text-white font-semibold hover:from-yellow-500 hover:to-yellow-600 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 7h14l-2-7M9 21a1 1 0 100-2 1 1 0 000 2zm6 0a1 1 0 100-2 1 1 0 000 2z"/>
                            </svg>
                            В кошик
                        </button>
                    </div>
                </div>
            </div>

            <!-- Випадок null -->
            <div th:if="${product == null}" class="bg-red-50 rounded-2xl p-5 w-72 border border-red-200">
                <p class="text-red-600 font-medium text-center">Помилка: товар = null</p>
            </div>
        </div>
    </div>
</div>
</body>
</html>
